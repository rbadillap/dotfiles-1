#!/bin/bash

path="$HOME/svn/helic-documents"
name="helicdocuments-solution-test"

echo "Updating and building project"
cd "$path" || exit
svn update
mvn clean install -DskipTests

if [ -d "$CATALINA_HOME/webapps/$name" ]; then
  echo "Deleting old tomcat project dir"
  sudo rm -rf "$CATALINA_HOME/webapps/$name"
fi

if [ -f "$CATALINA_HOME/webapps/$name.war" ]; then
  echo "Deleting old tomcat project war file"
  sudo rm "$CATALINA_HOME/webapps/$name.war"
fi

echo "Copying new project to tomcat webapps"
sudo cp "$path/solutions/$name/target/$name-4.8.6-SNAPSHOT.war" "$CATALINA_HOME/webapps/$name" -r
