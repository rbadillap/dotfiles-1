#!/bin/bash

if [ ! -d "$HOME/svn" ]; then
  echo "Abort: No svn repository found in $HOME/svn."
  exit 0
fi

mkdir -p "$HOME/svn/tiles-symlinks"

while [[ $# -gt 0 ]]; do
  key="$1"

  case $key in
    -c|--clear)
      rm -rf "$HOME/svn/tiles-symlinks/*"
      ;;
    *)
      ;;
  esac

  shift
done

find "$HOME/svn" -path "*/META-INF/conf/*-tiles.xml" | while read file; do
  ln -sf "$file" "$HOME/svn/tiles-symlinks/$(basename "$file")"
done
